@using AntDesign
@using AntDesign.Charts
@using FramerateAnalyzer.Domain
@using Title = AntDesign.Charts.Title

@if (data1.Any())
{
    <Tabs Class="mx-7">
        <TabPane Key="1">
            <TabTemplate>Aggregated Framerate</TabTemplate>
            <ChildContent>
                <Bar Data="data1" Config="config1"  />
            </ChildContent>
        </TabPane>
    </Tabs>
}

@code {
    [Parameter]
    public IList<FramerateCaptureGroup> CaptureGroups { get; set; }

    List<object> data1 = new();

    protected override void OnInitialized()
    {
        foreach (var group in CaptureGroups)
        {
            data1.Add(new
            {
                title = group.Cpu,
                data = Math.Round(group.Stats.AggregatedFramerate, 1)
            });
        }
    }

    BarConfig config1 = new BarConfig
    {
        Title = new Title
        {
            Visible = true,
            Text = "Aggregated Framerate"
        },
        Height = 200,
        XField = "data",
        YField = "title",
        Label = new BarViewConfigLabel
        {
            Visible = true,
            Position = "middle"
        }
    };
}