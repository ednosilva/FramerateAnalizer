@using AntDesign
@using AntDesign.Charts
@using FramerateAnalyzer.Domain
@using Title = AntDesign.Charts.Title

@* <MudPaper Elevation="0" Class="d-flex justify-center align-center">
    <MudChart ChartType="ChartType.Bar" ChartSeries="@_series" @bind-SelectedIndex="_index" Width="600px" Height="400px" XAxisLabels="@_xAxisLabels" AxisChartOptions="_axisChartOptions" />
</MudPaper>

@code {
    [Parameter]
    public IList<FramerateCaptureGroup> CaptureGroups { get; set; }

    private int _index = -1;

    private AxisChartOptions _axisChartOptions = new AxisChartOptions();

    private List<ChartSeries> _series = new List<ChartSeries>();

    private string[] _xAxisLabels;

    protected override void OnInitialized()
    {
        _axisChartOptions.MatchBoundsToSize = true;

        _xAxisLabels = CaptureGroups
        .Select(c => c.Cpu)
        .ToArray();

        _series = new List<ChartSeries>
        {
            new ChartSeries
            {
                Name = "Average FPS",
                Data = CaptureGroups
                    .Select(c => c.Stats.AggregatedFramerate)
                    .ToArray()
            }
        };

        base.OnInitialized();
    }
} *@

@if (data1.Any())
{
    <Tabs>
        <TabPane Key="1">
            <TabTemplate>Teste</TabTemplate>
            <ChildContent>
                <Bar Data="data1" Config="config1" />
            </ChildContent>
        </TabPane>
    </Tabs>
}


@code {
    [Parameter]
    public IList<FramerateCaptureGroup> CaptureGroups { get; set; }

    List<object> data1 = new();

    protected override void OnInitialized()
    {
        foreach (var group in CaptureGroups)
        {
            data1.Add(new
            {
                title = group.Cpu,
                data = group.Stats.AggregatedFramerate
            });
        }
    }

    BarConfig config1 = new BarConfig
    {
        XField = "data",
        YField = "title",
        Label = new BarViewConfigLabel
        {
            Visible = true
        }
    };
}